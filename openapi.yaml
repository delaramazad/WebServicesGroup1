openapi: 3.0.0
info:
  title: Espotifly API
  description: >
    Espotifly is a mashup service that combines flight data, geographic information 
    and music to create personalized travel playlists.
  version: 1.0.0

servers:
  - url: http://127.0.0.1:8081
    description: Local development server

paths:
  /api/flights/{flight_number}:
    get:
      summary: Get flight information and destination data
      description: Returns details about the flight, destination city, country display name, and a city image URL.
      parameters:
        - name: flight_number
          in: path
          required: true
          schema:
            type: string
          description: The IATA code for the flight (e.g., AA2730).
      responses:
        '200':
          description: Flight data retrieved successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  flight:
                    type: object
                    description: Raw flight data from the aviation service.
                  destination_country:
                    type: string
                    description: Display name of the destination country.
                  destination_city:
                    type: string
                    description: Name of the destination city.
                  city_image:
                    type: string
                    description: URL to a representative image of the city.
                  iso_code:
                    type: string
                    description: The country's ISO code for music recommendations.
        '404':
          description: No flight data found for the specified number.

  /api/flights/{flight_number}/playlists:
    post:
      summary: Create a Spotify flight playlist
      description: Generates a unique playlist based on the destination country, selected genres, and flight duration.
      parameters:
        - name: flight_number
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                genres:
                  type: array
                  items:
                    type: string
                  description: List of preferred music genres.
                iso_code:
                  type: string
                  description: ISO country code to filter artists.
      responses:
        '201':
          description: Playlist created successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  playlist_url:
                    type: string
                    description: URL to the generated Spotify playlist.

  /api/cities/{city_name}/facts:
    get:
      summary: Get facts about a city
      description: Retrieves a Wikipedia summary for the specified city.
      parameters:
        - name: city_name
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: City facts retrieved.

  /api/cities/{city_name}/sights: